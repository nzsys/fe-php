# fe-php Test Configuration - Single Worker Mode
# For testing segmentation fault issues on macOS

[server]
host = "0.0.0.0"
port = 8080
workers = 1

[php]
# Path to libphp.dylib on macOS
libphp_path = "/usr/local/php-embed/lib/libphp.dylib"

# Document root for PHP files
document_root = "/var/www/html"

# CRITICAL: Single worker for testing
worker_pool_size = 1

# Max requests per worker before restart
worker_max_requests = 10000

# Use embedded libphp (not PHP-FPM)
use_fpm = false

[php.opcache]
enable = true
memory_size = "256M"
max_files = 10000
validate_timestamps = false

[logging]
level = "info"
format = "json"
output = "stdout"

[metrics]
enable = true
endpoint = "/_metrics"
port = 9090

[waf]
enable = false
mode = "off"

[admin]
enable = false
